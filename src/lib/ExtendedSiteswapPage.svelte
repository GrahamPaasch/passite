<script>
	import InputField from '$lib/InputField.svelte';
	import CausalDiagramWidget from '$lib/CausalDiagramWidget.svelte';
	import AnimationWidget from '$lib/AnimationWidget.svelte';
	import Icon from '$lib/Icon.svelte';
	import { defaults, useLocalStorage, U } from '$lib/passist.mjs';
	import { browser } from '$app/env';
	import ExtendedSiteswap from '$lib/extended_siteswap.mjs';

	export let patternInput = "22[43][54]";
	//export let patternInput = "<3p3|3p3><3|3>";
	export let fullscreen = false;
	let pattern;
	let patternValid = false;
	let period;
	let jif;
	let propType = defaults.propType;
	let jugglingSpeed = defaults.jugglingSpeed;
	let animationSpeed = defaults.animationSpeed;
	let showOrbits = false;
	let windowWidth;
	let windowHeight;
	let limbs = [];
	let title = "extended siteswap test page";


	let patterns = [
		'<3p33|3p33>',
		'<(3p,3p)!|(0,0)!><(0,0)!|(3p,3p)!>',
		'<4p|4p>',
		'<(4x,4px)|(4x,4px)>',
		'<(4x,4px)|(4x,4px)>*',
		'003',
		'<(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)|(2,2)>',
		'22[43][54]',
		'22[43][64]4',
		'22[43][65]3',
		'22[52][65][21]',
		'22[53][53]',
		'22[53][65]2',
		'22[54][65]1',
		'22[64][64]1',
		'22[72][54][21]',
		'22[75][53]1',
		'22[76][43]1',
		'2334',
		'[234]57',
		'23[64]',
		'242334',
		'24[54]',
		'24[64]4',
		'24[65]3',
		'24[65]62',
		'24[72]',
		'24[76]33',
		'24[76]42',
		'25[53]',
		'25[62]',
		'25[65]2',
		'25[65]61',
		'25[75]1',
		'25[75]51',
		'25[76]23',
		'25[76]41',
		'26[43]',
		'26[64]2',
		'26[64]61',
		'26[76]31',
		'27[42]',
		'27[43]4',
		'27[43]63',
		'27[53]3',
		'27[54]2',
		'27[54]61',
		'27[75]31',
		'(2x,4)(0,2x)',
		'(2x,4)(4,2x)',
		'(2x,4x)',
		'(2x,4x)(2x,4)(4x,2x)(4,2x)',
		'(2x,4x)(4x,2)(4x,2x)(2,4x)',
		'(2x,6x)',
		'(2x,6x)(2x,2x)',
		'(2x,6x)(6x,2x)',
		'(2x,8)(4,2)(8,2)(4,2x)',
		'(2x,8)(4,2x)',
		'(2x,8)(8,2x)',
		'3',
		'315',
		'315171',
		'[32][32][32][32][32][32][52][52][52]555555522',
		'330',
		'[34]1',
		'[34]23',
		'35',
		'363',
		'3773',
		'4',
		'40',
		'414',
		'42',
		'423',
		'([42],4x)*',
		'(4,2x)(2x,4)',
		'(4,4)',
		'441',
		'44133',
		'4[43]1',
		'(4,4)(4,0)',
		'<(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)|(4,4)>',
		'444447333',
		'44453',
		'46131',
		'([46],[46])(0,6)(2,2)',
		'(4,6x)(2x,4)',
		'(4,6x)(4x,2)',
		'471231',
		'(4x,2)(2,4x)',
		'(4x,4x)',
		'(4x,4x)(0,0)',
		'(4x,4x)(0,4x)(4x,4x)(4x,0)',
		'(4x,4x)(4,4)',
		'(4x,6)(4,2x)',
		'(4x,6)(4,6x)',
		'(4x,6)(6,4x)',
		'(4x,6x)',
		'(4x,6x)(4x,2x)',
		'5',
		'51',
		'5241',
		'52512',
		'53',
		'531',
		'534',
		'[54]',
		'55050',
		'552',
		'55500',
		'5551',
		'55550',
		'555555744',
		'561',
		'5641',
		'566151',
		'5713',
		'575151',
		'577131',
		'6',
		'60',
		'612',
		'62',
		'622[42][54]',
		'622[62][43]',
		'623[54]',
		'623[64]4',
		'623[65]3',
		'625[65]1',
		'626[64]1',
		'627[54]1',
		'(6,2x)(6,2x)(2x,6)(2x,6)',
		'63141',
		'6316131',
		'633',
		'63551',
		'63641',
		'(6,4)',
		'64',
		'642',
		'645',
		'6451',
		'64613',
		'(6,4x)(4x,2)',
		'(6,4x)(4x,6)',
		'(6,6)',
		'66161',
		'6622[54]',
		'(6,6)(2x,6)(6,4x)',
		'663',
		'6631',
		'6662',
		'(6,6)(6,6)(0,6)',
		'66661',
		'666677477466774667747746666774',
		'6671',
		'6716161',
		'672',
		'67313',
		'6734',
		'67363',
		'67741',
		'6851',
		'693',
		'(6x,2)(2x,6)(2,6x)(6,2x)',
		'(6x,4)(4,6x)',
		'(6x,4)(6,4x)',
		'(6x,4)(6x,6x)(2,6x)',
		'(6x,6x)',
		'(6x,6x)(2x,2x)',
		'(6x,6x)(2x,6x)',
		'(6x,8x)(2x,4x)',
		'7',
		'71',
		'7131',
		'714',
		'71701701',
		'722[65][21]',
		'723',
		'723141',
		'723[53]',
		'723[65]2',
		'724[65]1',
		'726',
		'73',
		'731241',
		'73131',
		'7333',
		'733551',
		'73451',
		'73631',
		'741',
		'7423[54]',
		'744',
		'7441',
		'7463',
		'747741',
		'75',
		'753',
		'7531',
		'756',
		'7571',
		'75751',
		'771',
		'7733',
		'774',
		'774714',
		'777171',
		'77722',
		'7772677782',
		'7773',
		'77731',
		'77772',
		'777771',
		'77781',
		'77786',
		'777867',
		'77862',
		'779667',
		'7841',
		'7862678682',
		'78681',
		'786861',
		'7881',
		'7a666',
		'7b06',
		'8',
		'801',
		'8040',
		'8134',
		'82',
		'(8,2)(2x,4x)',
		'825',
		'(8,2x)(4,2x)(2x,8)(2x,4)',
		'(8,2x)(6x,4)',
		'831',
		'834',
		'8413',
		'8444',
		'8512',
		'852',
		'8534',
		'855',
		'8552',
		'861',
		'864',
		'8642',
		'86781',
		'868671',
		'(8,6x)(2x,4)',
		'8844',
		'88441',
		'88581',
		'891',
		'9',
		'91',
		'912',
		'9124',
		'913131',
		'915',
		'9151',
		'9155',
		'91951',
		'9313',
		'9313131',
		'9353',
		'94444',
		'945',
		'9494414',
		'9515',
		'9551',
		'95551',
		'96181',
		'963',
		'96672',
		'9669669969929962',
		'9669968926',
		'[97]121',
		'975',
		'97531',
		'993',
		'99[36]',
		'a',
		'a3b9c',
		'a55550',
		'aaaaaa3',
		'aaaaaab9aaaab9ab9aaaab9a',
		'aaaab9b9a',
		'aabb3',
		'ab9b9a3',
		'ab9b9b9b9',
		'b1',
		'b9',
		'b9aab939abb6a69',
		'b9ab9aaaa',
		'bb8bb8ab9',
		'bbbcc933aaac993',
		'be00af00a0',
		'< (c,c) (8,8) (4,4)|(c,c) (8,8) (4,4)|(c,c) (8,8) (4,4)|(c,c) (8,8) (4,4)> ',
		'd1',
		'd33dd',
		'd960',
		'd999',
		'd9cd3',
		'dd39c',
		'dh0c0c',
		'fk00g0jl00el00',
		'j00hc000mg00c0e0',
	];

$:	{
		pattern = new ExtendedSiteswap(patternInput);
		patternValid = pattern.isValid();
	console.log('valid', patternValid);
	}

</script>

<style>
	.causalDiagram { overflow-x:auto; margin-bottom:1em }
	label.pure-button { margin:0 }
	.patterns { float:right; width:20em; height:70vh; overflow-y:scroll }
	.patterns li { list-style-type: none; padding: 0; margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis }
</style>

<svelte:window bind:innerWidth={windowWidth} bind:innerHeight={windowHeight} />

<svelte:head>
	<title>passist - {title}</title>
</svelte:head>

<ul class=patterns>

	{#each patterns as p}
		<li><a href='#' on:click={e => {patternInput = p;}}>{p}</a></li>

	{/each}
</ul>

<InputField
	bind:value={patternInput}
	id=patternInput
	label=Pattern
	type=search
	valid={patternValid || !patternInput}
	attr={{
		class:     'siteswap',
		inputmode: 'verbatim',
		size:      20,
	}}
		/>

{#if patternValid || fullscreen}
	<!--
	<h2>{pattern.toString()}</h2>
	-->

	<!-- <h3>AST:</h3> -->
	<!-- <pre> -->
	<!-- 	{JSON.stringify(pattern.ast, null, 2)} -->
	<!-- </pre> -->

	<!-- <h3>JIF:</h3> -->
	<!-- <div class=causalDiagram> -->
	<!-- 	<CausalDiagramWidget -->
	<!-- 		jif={pattern.jif} -->
	<!-- 	/> -->
	<!-- </div> -->

	<div class=animation-wrapper style="width:{windowWidth > 1000 ? 1000 : windowWidth - 32}px; height:300px">
		<AnimationWidget
			jif={pattern.jif}
			valid={patternValid}
		>
		</AnimationWidget>
	</div>

	<!-- <pre> -->
	<!-- {JSON.stringify(pattern.jif, null, 2)} -->
	<!-- </pre> -->


{:else if patternInput}
	<div>
		<!--
		<img src=/images/mr_meeseeks_shocked_small.png alt="mr meeseeks is shocked to see an invalid siteswap" >
			-->
		<p>Invalid Pattern</p>
		{#if pattern.error}
			{pattern.error}

		{/if}

	</div>
{:else}
	<!-- empty string: no output -->
{/if}
